# GitHub Pages'e Dağıtım Workflow
# Bu workflow, main branch'a her push yapıldığında sayfayı otomatik olarak yayınlar

name: GitHub Pages'e Dağıt

on:
  # main branch'a her push'ta çalış
  push:
    branches:
      - main
  # Manuel olarak çalıştırmak için workflow_dispatch seçeneği
  workflow_dispatch:

# Gerekli izinler
permissions:
  contents: read
  pages: write
  id-token: write

# Eşzamanlı deployment'ları yönet
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      # Adım 1: Repository'yi indir
      - name: Repository'yi İndir
        uses: actions/checkout@v4

      # Adım 2: GitHub Pages ayarlarını yap
      - name: GitHub Pages Ayarlarını Yapılandır
        uses: actions/configure-pages@v4

      # Adım 3: Dosyaları artifact'a yükle
      - name: Dosyaları Artifact'a Yükle
        uses: actions/upload-pages-artifact@v3
        with:
          path: '.'

      # Adım 4: Artifact'ı GitHub Pages'e dağıt
      - name: GitHub Pages'e Dağıt
        id: deployment
        uses: actions/deploy-pages@v4

    # GitHub Pages ortamı
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
